# TDD로 CLI 로직 개발해보기

- 사용 언어 : Javascript

## 구현 내용

cli를 개발하고자 한다. cli를 개발할 때, 들어온 input값이 틀린지 아닌지 부분에 대한 로직을 개발해보고자한다.

- 1차 대응 : 명령어 + 타입 메타 정보 + 명령어 뭉치가 주어지는데, 주어진 메타 정보에 맞게 읽을 수 있어야한다. 메타 정보와 틀린 타입이나 정보가 있다면 false를 반환해야한다. 타입 메타 정보는 -s : STRING 같은 정보이다. -s : String으로 등록되었는데 -s 123 등이 들어오면 false를 리턴해야한다.

- 2차 대응 : value가 array (예: STRINGS) 타입일 수 있다. array타입을 대응해야한다. 

- 3차 대응 : 타입 alias가 등장한다. (-n == -number) 단, alias는 중복해서 사용할 수 없다.

## 느낀점

- TDD를 활용해서 개발하면 리팩토링에 있어서 자유로움을 느꼈다.
- 특히, 리팩토링할때는 리팩토링할때만, 구현할때는 구현에만 집중할 수 있었다.
- 사실 TDD를 하면서 레드->그린 단계가 매우 지루했다. 그래서, 레드->그린 단계를 무시하고 한번에 구현시키려는 욕구가 생겼다. 근데 그렇게 접근하면 TDD 흐름이 깨진다는걸 느꼈다. 안정감을 느끼려면 스탭을 잘게 하고 마음가짐을 너무 복잡하게 생각하지 않는것(?) 도 필요했다.
- 중간에 오버엔지니어링 욕구가 샘솟는 부분이 있었는데 (3차 대응 부분에 alias 사용 체크 부분), TDD를 하다보니까 그런 욕구가 많이 사라졌다.
- 생각보다 테스트를 구상하는것은 어렵지 않았다. 어려웠던점은 점점 스펙이 복잡해지면서 테스트를 통과시킬 수 있게 만들 수 있는 구현력과 리팩토링을 수행하는 능력이 더 중요한것을 느꼈다. (처음에 시도했던 리팩토링은 의존관계에 얽혀있어서 스펙이 새로 추가될때마다 대규모 엎기를 해줘야했다.)
- 리팩토링 기준은 최대한 인덴트를 덜보이게 만드려고 했고, 중복되는 부분, 빠질 수 있는 부분들은 모두 별도로 뺴주었다.
- 테스트 리팩토링도 필요함을 느꼈다. (기존 일일히 test()를 만들었던 반복을 피하고 paramaterized 테스트로 변경했다.)
